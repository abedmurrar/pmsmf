<!DOCTYPE html>
<!--[if lt IE 7]>      <html class='no-js lt-ie9 lt-ie8 lt-ie7'> <![endif]-->
<!--[if IE 7]>         <html class='no-js lt-ie9 lt-ie8'> <![endif]-->
<!--[if IE 8]>         <html class='no-js lt-ie9'> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
    <!--<![endif]-->
    <%- include('../includes/head') %>
    <body>
        <!--[if lt IE 7]>
            <p class="browsehappy">
                You are using an <strong>outdated</strong> browser. Please
                <a href="#">upgrade your browser</a> to improve your experience.
            </p>
        <![endif]-->
        <%- include('../includes/header') %>
        <div class="container-fluid">
            <div class="row">
                <%- include('../includes/nav') %>
                <div
                    class="card col-xl-10 offset-xl-2 col-9 offset-3 col-md-9 offset-md-3 col-lg-10 offset-lg-2 col-sm-8 offset-sm-4 mr-1" >
                    <div class="card-body">
                        <div class="card-header"><h3><%= card_header %></h3></div>

                        <div class="">
                        <form id="rally-form">
                            <div class="form-group">
                                <label for="name">Name</label>
                                <input type="text" name="name" class="form-control" value="<%= form && form.name %>">
                            </div>
                            <div class="form-group">
                                <label for="city">City</label>
                                <input type="text" name='city' class="form-control" value="<%= form && form.city %>">
                            </div>
                            <div class="form-group">
                                <label for="date">Date</label>
                                <input type="date" name="date" class="form-control" value="<%= form && form.date %>">
                            </div>
                            <div class="form-group">
                                <label for="type">License</label>
                                <select name="type" class="form-control">
                                    <option value="1"
                                        <% if (form && form.push_type == 1) { %>
                                            selected="selected"
                                        <% } %>
                                    >
                                    Speed
                                    </option>
                                    <option value="2"
                                        <% if (form && form.push_type == 2) { %>
                                            selected="selected"
                                        <% } %>
                                    >
                                    Drift
                                    </option>
                                    <option value="3"
                                        <% if (form && form.push_type == 3) { %>
                                            selected="selected"
                                        <% } %>
                                    >
                                    4x4
                                    </option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="remarks">Remarks</label>
                                <textarea name="remarks" class="form-control" cols="30" rows="10" value="<%= form && form.remarks %>"></textarea>
                            </div>
                            <button type="submit" class="btn btn-primary">Submit</button>
                        </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(document).ready(function(){
                $('#rally-form').submit(function(event){
                    const data = $(this).serialize();
                    event.preventDefault();
                    $.ajax({
                        url: "<%= action %>",
                        method: "<%= method %>",
                        data,
                        success: function(result){
                            alert('success');
                            //TODO : create cars for alert (success, error)
                        },
                        error: function(){
                            alert('error');
                        }
                    })
                })
            });
        </script>
    </body>
</html>
