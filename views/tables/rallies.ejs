<!DOCTYPE html>
<!--[if lt IE 7]>
<html class='no-js lt-ie9 lt-ie8 lt-ie7'> <![endif]-->
<!--[if IE 7]>
<html class='no-js lt-ie9 lt-ie8'> <![endif]-->
<!--[if IE 8]>
<html class='no-js lt-ie9'> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->
<%- include('../includes/head') %>
<body>
<%- include('../includes/header') %>
<div class="container-fluid">
    <div class="row">
        <%- include('../includes/nav') %>
        <div class="card col-xl-10 offset-xl-2 col-9 offset-3 col-md-9 offset-md-3 col-lg-10 offset-lg-2 col-sm-8 offset-sm-4 mr-1">
            <div class="card-body">
                <a href="/rallies/create" class="btn btn-primary">Add Rally</a>
                <div class="">
                    <table
                            id="rallies"
                            class="table table-striped table-bordered"
                            style="width:100%"
                    ></table>
                </div>
            </div>
        </div>
    </div>
</div>
<!--[if lt IE 7]>
<p class="browsehappy">
    You are using an <strong>outdated</strong> browser. Please
    <a href="#">upgrade your browser</a> to improve your experience.
</p>
<![endif]-->

<script>
    $(document).ready(function() {
        const table = $('#rallies').DataTable({
            ajax: {
                url: '/api/rallies',
                dataSrc: 'data.results'
            },
            columns: [
                { title: 'ID', data: 'id' },
                { title: 'Name', data: 'name' },
                { title: 'City', data: 'city' },
                { title: 'Date', data: 'date' },
                { title: 'Type', data: 'type' },
                { title: 'Remarks', data: 'remarks' }
            ],
            processing: true,
            serverSide: true,
            deferRender: true
        });

        table.buttons().action( function( e, dt, button, config ) {
    console.log( 'Button '+this.text()+' activated' );
    this.disable();
} );

        table.on('draw', function(e, settiongs) {
            console.log(e);
            console.log(settiongs);
        });
    });
</script>
</body>
</html>
